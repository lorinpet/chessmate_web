(()=>{var e={213:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/bn.c74af2963d410b499722.png"},409:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAQAAAD2e2DtAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRAD/h4/MvwAAAAd0SU1FB+kCFhQZERiyOY8AAAABb3JOVAHPoneaAAACDklEQVR42u3czU6DQBhA0anx/V9ZF3ZhF0aI1MJ3z1k3DQyXmZSfrgUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGx1e/UG7PLxtL34/s23DZ/5ybXGc6319uoN4LXeX70Bh3g8N/9yBueYAeIEECeAOAHECSBOAHECiBNAnADiBBAngDgBxAkgbsbdwEfu+u0wMYC/SgVkCYgTQJwA4gQQJ4A4AcQJIE4AcQKIE0CcAOIEECeAOAHEXe599s2Ov6k7cqxG7tQ68vBPHaE7S0CcAH4z/PkgAcQJIE4AcQKIE0CcAOIEECeAOAHECSBu4suhwy/eHssMECeAOAH8bvSSIoA4AcQJIE4AcQKIE0CcAOIEECeAOAHECSBuXgCjr9wfb14A7CKAOAFsMXhZEUCcAOIEECeAOAHECSBOAHECiBNA3LQABl+ze45pAbCTAOKm/RPuM5eAaWO11jID5AkgTgBxAogTQJwA4gQQJ4A4AcQJIE4AcbMCcDN4t1kBsJsAths5vwggTgBxAogTQJwA4gQQd/4HHa/64+v8I7vWMgPknb3Tq57/a51/bE+/kVc++F/OPLp3loBnukDC5w3gAoM3wXkD4F8IIE4AcQKIE0CcAOIEECeAOAHECSBOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACw1ycUbBfbFZSkXgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyNS0wMi0yMlQyMDoyNDozMiswMDowMMnE6bsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjUtMDItMjJUMjA6MjQ6MzIrMDA6MDC4mVEHAAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDI1LTAyLTIyVDIwOjI1OjE3KzAwOjAwEFMzPAAAAABJRU5ErkJggg=="},685:(e,t,a)=>{var s={"./(tabs)/404.tsx":3296,"./(tabs)/archive.tsx":2782,"./(tabs)/dashboard.tsx":9140,"./(tabs)/forgot.tsx":9099,"./(tabs)/game.tsx":2608,"./(tabs)/login.tsx":1739,"./(tabs)/profile.tsx":8415,"./(tabs)/register.tsx":5445,"./(tabs)/reset.tsx":7353,"./(tabs)/settings.tsx":7901,"./+not-found.tsx":8973,"./_layout.tsx":5111,"./index.tsx":5250};function l(e){var t=o(e);return a(t)}function o(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=o,e.exports=l,l.id=685},1739:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(2772),l=a(558),o=a(3668),n=a(6283),r=a(3929),i=a(6773),c=a(5648),d=a(484),u=a(5259),f=a(9637),h=a(6665),g=a(397);const m=o.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"#444"},title:{fontSize:32,fontWeight:"bold",marginBottom:10,color:"#fff"},profileImage:{width:200,height:200,borderRadius:50,marginBottom:10},input:{width:"80%",height:50,backgroundColor:"#444",color:"#ccc",borderColor:"#ccc",borderWidth:2,borderRadius:2,paddingHorizontal:15,marginBottom:5,fontSize:18},warning:{width:"80%",color:"#f00",marginBottom:10,fontSize:18,fontWeight:"bold"},button:{width:"80%",height:50,backgroundColor:"#fff",justifyContent:"center",alignItems:"center",borderRadius:5,marginBottom:5},buttonText:{color:"#08f",fontSize:18,fontWeight:"bold"},linkText:{color:"#08f",fontSize:18,fontWeight:"bold",marginVertical:10}}),b=()=>{const[e,t]=(0,h.useState)(!0),[o,b]=(0,h.useState)(""),[p,x]=(0,h.useState)(""),[w,y]=(0,h.useState)({username:!1,password:!1}),[A,j]=(0,h.useState)("0"),[S,k]=(0,h.useState)(!1),C=(0,f.useRouter)(),v=(0,f.usePathname)(),z="chessmate-production.up.railway.app";(0,h.useEffect)((()=>{e&&(async()=>{let e;try{const a=await u.default.getItem("token");e=await fetch("https://"+z+"/verify?token="+a),t(!1)}catch(a){return void t(!1)}e.json().then((e=>{"0"===e.code?C.push("dashboard"):"/chessmate_web"===v&&C.push("login")}))})()}),[]);return(0,g.jsx)(s.default,{children:(0,g.jsxs)(r.default,{style:[m.container,{minHeight:(0,l.default)().height}],children:[(0,g.jsx)(n.default,{style:m.title,children:"ChessMate"}),(0,g.jsx)(d.default,{source:a(7877),style:m.profileImage}),(0,g.jsx)(i.default,{style:m.input,placeholder:"USERNAME",placeholderTextColor:"#bbb",value:o,onChangeText:b}),w.username&&(0,g.jsx)(n.default,{style:m.warning,children:"Invalid username."}),(0,g.jsx)(i.default,{style:m.input,placeholder:"PASSWORD",placeholderTextColor:"#bbb",value:p,onChangeText:x,secureTextEntry:!0}),w.password&&(0,g.jsx)(n.default,{style:m.warning,children:"Invalid password."}),(0,g.jsx)(c.default,{style:m.button,onPress:async()=>{const e={username:!1,password:!1};let t=!1;/^[A-Za-z][A-Za-z0-9_]{2,14}$/.test(o)||(e.username=!0,j("0"),t=!0);if(/^[A-Za-z0-9_]{8,32}$/.test(p)||(e.password=!0,j("0"),t=!0),y(e),!t){k(!0);try{const e=await fetch("https://"+z+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:p})});if(e.ok){const t=await e.json();await u.default.setItem("token",t.message),C.push("dashboard")}else{const t=await e.json();j(t.error)}}catch(a){j("4")}finally{k(!1)}}},disabled:S,children:(0,g.jsx)(n.default,{style:m.buttonText,children:S?"Logging in...":"LOGIN"})}),"0"!==A&&(0,g.jsx)(n.default,{style:m.warning,children:"1"===A?"Account not confirmed by email yet.":"2"===A?"Wrong password.":"3"===A?"User doesn't exist.":"Unknown error."}),(0,g.jsx)(f.Link,{href:"forgot",style:m.linkText,children:(0,g.jsx)(n.default,{style:m.linkText,children:"Forgot password?"})}),(0,g.jsx)(f.Link,{href:"register",style:m.linkText,children:(0,g.jsx)(n.default,{style:m.linkText,children:"Don't have an account yet? Register."})})]})})}},1769:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/bb.e300f90faee37a91f211.png"},2608:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>z});var s=a(3929),l=a(6283),o=a(3668),n=a(558),r=a(2772),i=a(5648),c=a(484),d=a(6773),u=a(5708),f=a(6665),h=a(5259),g=a(9637),m=a(9149),b=a(397);const p="chessmate-production.up.railway.app",x={P:a(9708),N:a(6434),B:a(5214),R:a(4798),Q:a(7221),K:a(4799),p:a(4267),n:a(213),b:a(1769),r:a(409),q:a(9442),k:a(9736)},w=["P","N","B","R","Q","K"],y=["p","n","b","r","q","k"],A=[["r","n","b","q","k","b","n","r"],["p","p","p","p","p","p","p","p"],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["P","P","P","P","P","P","P","P"],["R","N","B","Q","K","B","N","R"]],j=(e,t,a,s,l,o)=>{for(let n=0;n<8;n++)for(let r=0;r<8;r++){const i=a[n][r];if(i&&(s?y.includes(i):w.includes(i))){if(S(n,r,i,a,!0,!1,l,o).some((a=>a.row===e&&a.col===t)))return!0}}return!1},S=(e,t,a,s,l,o,n,r)=>{const i=[],c=a===a.toUpperCase(),d=(e,t)=>e>-1&&e<8&&t>-1&&t<8,u=(e,t)=>{const a=s[e][t];return!a||(c?a===a.toLowerCase():a===a.toUpperCase())},f=(e,t)=>{d(e,t)&&i.push({row:e,col:t})};switch(a.toUpperCase()){case"P":const a=c?-1:1,i=c?6:1;if(l||!d(e+a,t)||s[e+a][t]||(f(e+a,t),e!==i||s[e+2*a][t]||f(e+2*a,t)),d(e+a,t-1)&&s[e+a][t-1]&&u(e+a,t-1)&&f(e+a,t-1),d(e+a,t+1)&&s[e+a][t+1]&&u(e+a,t+1)&&f(e+a,t+1),!l&&n.start&&n.target){const{from:l,to:o}={from:n.start,to:n.target};"p"!==s[o.row][o.col].toLowerCase()||2!==Math.abs(l.row-o.row)||o.row!==e||o.col!==t-1&&o.col!==t+1||f(e+a,o.col)}break;case"N":[{row:e-2,col:t-1},{row:e-2,col:t+1},{row:e-1,col:t-2},{row:e-1,col:t+2},{row:e+1,col:t-2},{row:e+1,col:t+2},{row:e+2,col:t-1},{row:e+2,col:t+1}].forEach((e=>{d(e.row,e.col)&&u(e.row,e.col)&&f(e.row,e.col)}));break;case"B":for(let l=1;l<8&&d(e+l,t+l);l++){if(s[e+l][t+l]){u(e+l,t+l)&&f(e+l,t+l);break}f(e+l,t+l)}for(let l=1;l<8&&d(e+l,t-l);l++){if(s[e+l][t-l]){u(e+l,t-l)&&f(e+l,t-l);break}f(e+l,t-l)}for(let l=1;l<8&&d(e-l,t+l);l++){if(s[e-l][t+l]){u(e-l,t+l)&&f(e-l,t+l);break}f(e-l,t+l)}for(let l=1;l<8&&d(e-l,t-l);l++){if(s[e-l][t-l]){u(e-l,t-l)&&f(e-l,t-l);break}f(e-l,t-l)}break;case"R":for(let l=1;l<8&&d(e+l,t);l++){if(s[e+l][t]){u(e+l,t)&&f(e+l,t);break}f(e+l,t)}for(let l=1;l<8&&d(e-l,t);l++){if(s[e-l][t]){u(e-l,t)&&f(e-l,t);break}f(e-l,t)}for(let l=1;l<8&&d(e,t+l);l++){if(s[e][t+l]){u(e,t+l)&&f(e,t+l);break}f(e,t+l)}for(let l=1;l<8&&d(e,t-l);l++){if(s[e][t-l]){u(e,t-l)&&f(e,t-l);break}f(e,t-l)}break;case"Q":S(e,t,c?"R":"r",s,!1,o,n,r).forEach((e=>f(e.row,e.col))),S(e,t,c?"B":"b",s,!1,o,n,r).forEach((e=>f(e.row,e.col)));break;case"K":[{row:e-1,col:t-1},{row:e-1,col:t},{row:e-1,col:t+1},{row:e,col:t-1},{row:e,col:t+1},{row:e+1,col:t-1},{row:e+1,col:t},{row:e+1,col:t+1}].forEach((e=>{d(e.row,e.col)&&u(e.row,e.col)&&f(e.row,e.col)})),l||((!c||r.whiteKingside)&&(c||r.blackKingside)||s[e][t+1]||s[e][t+2]||j(e,t,s,c,n,r)||j(e,t+1,s,c,n,r)||j(e,t+2,s,c,n,r)||f(e,t+2),(!c||r.whiteQueenside)&&(c||r.blackQueenside)||s[e][t-1]||s[e][t-2]||s[e][t-3]||j(e,t,s,c,n,r)||j(e,t-1,s,c,n,r)||j(e,t-2,s,c,n,r)||f(e,t-2))}if(o){const a=i.filter((a=>{const l=((e,t,a)=>{const s=e.map((e=>[...e])),l=s[t.row][t.col];return s[t.row][t.col]="",s[a.row][a.col]=l,s})(s,{row:e,col:t},a);return!((e,t,a,s)=>{const l=t?"K":"k";let o=-1,n=-1;for(let r=0;r<8;r++){for(let t=0;t<8;t++)if(e[r][t]===l){o=r,n=t;break}if(-1!==o)break}for(let r=0;r<8;r++)for(let l=0;l<8;l++){const i=e[r][l];if(i&&(t?y.includes(i):w.includes(i))&&S(r,l,i,e,!0,!1,a,s).some((e=>e.row===o&&e.col===n)))return!0}return!1})(l,c,n,r)}));return a}return i},k=f.memo((({boardState:e,boardSize:t,onSquarePress:a,selectedPiece:l,fliped:o,legalMoves:n,currentMoves:r})=>{const i=t/8;return(0,b.jsx)(s.default,{style:{width:t,height:t},children:e.map(((e,t)=>e.map(((e,s)=>{const{row:d,col:f}=((e,t)=>o?{row:7-e,col:7-t}:{row:e,col:t})(t,s),h=l&&l.row===t&&l.col===s,g=r.start&&r.start.row===t&&r.start.col===s||r.target&&r.target.row===t&&r.target.col===s,m=n.some((e=>e.row===t&&e.col===s));let p;return p=(t+s)%2===0?m?"#c00":h||g?"#fc8":"#c3c2c2":m?"#800":h||g?"#fc4":"#504d55",(0,b.jsx)(u.default,{onPress:()=>a(t,s),style:{position:"absolute",left:f*i,top:d*i,width:i,height:i,backgroundColor:p,justifyContent:"center",alignItems:"center"},children:e&&(0,b.jsx)(c.default,{source:x[e],style:{width:i,height:i},resizeMode:"contain"})},`${t}-${s}`)}))))})})),C=({isWhite:e,onSelect:t,boardSize:a})=>{const l=e?["Q","R","B","N"]:["q","r","b","n"],o=a/8;return(0,b.jsx)(s.default,{style:[v.promotionMenu,{width:a,height:1.5*o,transform:[{translateX:-a/2},{translateY:.75*-o}]}],children:l.map((e=>(0,b.jsx)(i.default,{style:v.promotionOption,onPress:()=>t(e),children:(0,b.jsx)(c.default,{source:x[e],style:{width:o,height:o}})},e)))})},v=o.default.create({container:{justifyContent:"center",alignItems:"center",backgroundColor:"#444"},topBar:{flexDirection:"row",alignItems:"center",width:"100%",paddingHorizontal:20,marginTop:20},backArrow:{flex:1,alignItems:"flex-start"},flipBoard:{flex:1,alignItems:"flex-end"},topCenter:{flex:2,alignItems:"center"},topRight:{flex:1,alignItems:"flex-end"},profilePicture:{borderRadius:25},timer:{fontWeight:"bold",color:"#888"},moveIndicator:{fontWeight:"bold",color:"#ccc"},userInfo:{fontWeight:"bold",color:"#888"},rating:{color:"#ccc"},boardWithLabelsContainer:{flexDirection:"row",alignItems:"center"},rankLabelsContainer:{justifyContent:"space-between",marginHorizontal:5},rankLabel:{color:"#ccc"},fileLabelsContainer:{flexDirection:"row",marginVertical:5},fileLabel:{color:"#ccc",textAlign:"center",flex:1},bottomBar:{flexDirection:"row",alignItems:"center",width:"100%",paddingHorizontal:20,marginBottom:10},bottomLeft:{flex:1,alignItems:"flex-start"},bottomCenter:{flex:2,alignItems:"center"},buttonContainer:{flexDirection:"row",justifyContent:"space-around",width:"100%",marginTop:20},button:{alignItems:"center",backgroundColor:"#888",paddingVertical:10,borderRadius:25},buttonText:{color:"#fff",fontWeight:"bold",marginTop:5},capturedPiecesContainer:{flexDirection:"row"},capturedWhite:{flexDirection:"row-reverse"},capturedBlack:{flexDirection:"row"},promotionMenu:{flexDirection:"row",justifyContent:"space-around",alignItems:"center",backgroundColor:"#888",borderRadius:10,position:"absolute",top:"50%",left:"50%"},promotionOption:{backgroundColor:"#444",borderRadius:10},chatContainer:{position:"absolute",bottom:80,right:20,width:300,height:200,backgroundColor:"#888",borderRadius:10,padding:10},chatMessage:{color:"#fff",fontSize:14,marginBottom:5},chatInputContainer:{flexDirection:"row"},chatInput:{flex:1,backgroundColor:"#444",color:"#fff",borderRadius:5,padding:5,marginRight:10},sendButton:{backgroundColor:"#888",borderRadius:5,padding:5},gameOverText:{fontSize:24,fontWeight:"bold",color:"#fff",textAlign:"center"}}),z=()=>{const e=(0,g.useLocalSearchParams)(),t=e.gameId,a=e.color,o=e.name,u=e.image,j=e.rating,[z,I]=(0,f.useState)(!0),[B,T]=(0,f.useState)("????"),[P,R]=(0,f.useState)("https://"+p+"/uploads/_.png"),[E,D]=(0,f.useState)("????"),[L,O]=(0,f.useState)("????"),[W,M]=(0,f.useState)("https://"+p+"/uploads/_.png"),[N,Q]=(0,f.useState)("????"),{width:_,height:H}=(0,n.default)(),G=_>H?.9*H:.9*_,V=["A","B","C","D","E","F","G","H"],J=["1","2","3","4","5","6","7","8"].reverse(),[U,K]=(0,f.useState)(A),[F,$]=(0,f.useState)(null),[Y,q]=(0,f.useState)(null),[Z,X]=(0,f.useState)([]),[ee,te]=(0,f.useState)([]),[ae,se]=(0,f.useState)(!0),[le,oe]=(0,f.useState)({start:null,target:null}),[ne,re]=(0,f.useState)({whiteKingside:!1,blackKingside:!1,whiteQueenside:!1,blackQueenside:!1}),[ie,ce]=(0,f.useState)(null),[de,ue]=(0,f.useState)(!1),[fe,he]=(0,f.useState)(null),[ge,me]=(0,f.useState)(0),[be,pe]=(0,f.useState)(0),[xe,we]=(0,f.useState)("ongoing"),[ye,Ae]=(0,f.useState)([]),[je,Se]=(0,f.useState)(""),[ke,Ce]=(0,f.useState)(!1);(0,g.useRouter)();(0,f.useEffect)((()=>{z&&(async()=>{let e;try{const t=await h.default.getItem("token");e=await fetch("https://"+p+"/verify?token="+t),I(!1)}catch(t){return void I(!1)}e.json().then((e=>{"1"===e.code&&ve()}))})()}),[]);const ve=async()=>{window.location.href="https://lorinpet.github.io/chessmate_web"},ze=async(e,t)=>{const a=await fetch(e);t?R(a.url):M(a.url)};(0,f.useEffect)((()=>{const e=new WebSocket("wss://"+p+"/game?gameId="+t+"&color="+a+"&name="+o+"&image="+u+"&rating="+j);return e.onopen=()=>{console.log("WebSocket connected")},e.onmessage=e=>{const t=JSON.parse(e.data);"assignColor"===t.type?(ce(t.color),ue("black"===t.color)):"setWhiteUser"===t.type?(T(t.whiteName),ze(t.whiteImage,!0),D(t.whiteRating)):"setBlackUser"===t.type?(O(t.blackName),ze(t.blackImage,!1),Q(t.blackRating)):"gameState"===t.type?(K(t.gameState.board),se("white"===t.gameState.currentTurn),X(t.gameState.capturedWhite),te(t.gameState.capturedBlack),oe({start:t.gameState.lastMoveStart,target:t.gameState.lastMoveTarget}),re({whiteKingside:t.gameState.whiteKingside,blackKingside:t.gameState.blackKingside,whiteQueenside:t.gameState.whiteQueenside,blackQueenside:t.gameState.blackQueenside}),me(t.gameState.whiteTimer),pe(t.gameState.blackTimer),t.gameState.winner&&(q(null),$(null),we(t.gameState.winner))):"chat"===t.type&&Ae((e=>[...e,t.message]))},e.onclose=()=>{console.log("WebSocket disconnected")},e.onerror=e=>{console.error("WebSocket error:",e)},he(e),()=>{e.close()}}),[]);const Ie=(0,f.useMemo)((()=>F?S(F.row,F.col,F.piece,U,!1,!0,le,ne):[]),[F]),Be=(0,f.useCallback)(((e,t)=>{if("????"===B||"????"===L)return;if("ongoing"!==xe||Y||ke)return q(null),void $(null);const a=U[e][t];if(F){const s={row:F.row,col:F.col},l={row:e,col:t};if(F.row===e&&F.col===t)$(null);else if(a&&("white"===ie&&ae&&w.includes(a)||"black"===ie&&!ae&&y.includes(a)))$({row:e,col:t,piece:a});else{const a=ae?0:7;if("p"===F.piece.toLowerCase()&&e===a&&Ie.some((a=>a.row===e&&a.col===t)))return void q({row:e,col:t});Te(s,l,null),$(null)}}else a&&("white"===ie&&ae&&w.includes(a)||"black"===ie&&!ae&&y.includes(a))&&$({row:e,col:t,piece:a})}),[U,F,ae,Y,xe,ke]),Te=(e,t,a)=>{fe&&fe.send(JSON.stringify({type:"move",from:e,to:t,promotion:a}))},Pe=e=>{const t=G/8,a=G/16;return(0,b.jsx)(s.default,{style:[v.capturedPiecesContainer,{height:t}],children:e.map(((e,s)=>(0,b.jsx)(c.default,{source:x[e],style:[{width:a,height:t}]},`captured-${e}-${s}`)))})},Re=e=>{const t=Math.min(H/800,_/400,2);return Math.max(e*t,2)},Ee=.25*_,De=e=>{const t=e%60;return`${Math.floor(e/60)}:${t<10?"0":""}${t}`};return(0,b.jsx)(r.default,{children:(0,b.jsxs)(s.default,{style:[v.container,{minHeight:H}],children:[(0,b.jsxs)(s.default,{style:v.topBar,children:[(0,b.jsx)(s.default,{style:v.backArrow,children:(0,b.jsx)(g.Link,{onPress:()=>fe.close(),href:"dashboard",children:(0,b.jsx)(s.default,{children:(0,b.jsx)(m.default,{name:"arrow-back",size:Re(30),color:"#ccc"})})})}),(0,b.jsxs)(s.default,{style:v.topCenter,children:[(0,b.jsx)(l.default,{style:[v.timer,{fontSize:Re(32)}],children:De(de?ge:be)}),(0,b.jsx)(l.default,{style:[v.moveIndicator,{fontSize:Re(20)}],children:"ongoing"!==xe?" ":ae?de?"White to move":" ":de?" ":"Black to move"})]}),(0,b.jsxs)(s.default,{style:v.topRight,children:[(0,b.jsx)(c.default,{source:{uri:de?P:W},style:[v.profilePicture,{width:Re(50),height:Re(50)}]}),(0,b.jsx)(l.default,{style:[v.userInfo,{fontSize:Re(18)}],children:de?B:L}),(0,b.jsx)(l.default,{style:[v.rating,{fontSize:Re(14)}],children:de?E:N})]})]}),Pe(ee),(0,b.jsx)(s.default,{style:[v.fileLabelsContainer,{width:G}],children:V.map(((e,t)=>(0,b.jsx)(l.default,{style:[v.fileLabel,{fontSize:12}],children:de?V[V.length-1-t]:e},`file-top-${e}`)))}),(0,b.jsxs)(s.default,{style:v.boardWithLabelsContainer,children:[(0,b.jsx)(s.default,{style:v.rankLabelsContainer,children:J.map(((e,t)=>(0,b.jsx)(l.default,{style:[v.rankLabel,{marginVertical:G/26,fontSize:12}],children:de?J[J.length-1-t]:e},`rank-${e}`)))}),(0,b.jsxs)(s.default,{children:[(0,b.jsx)(k,{boardState:U,boardSize:G,onSquarePress:Be,selectedPiece:F,fliped:de,legalMoves:Ie,currentMoves:le}),Y&&(0,b.jsx)(C,{isWhite:"white"===ie,onSelect:e=>{if(Y&&F){const t={row:F.row,col:F.col},a={row:Y.row,col:Y.col};Te(t,a,e),q(null),$(null)}},boardSize:G})]}),(0,b.jsx)(s.default,{style:v.rankLabelsContainer,children:J.map(((e,t)=>(0,b.jsx)(l.default,{style:[v.rankLabel,{marginVertical:G/26,fontSize:12}],children:de?J[J.length-1-t]:e},`rank-right-${e}`)))})]}),(0,b.jsx)(s.default,{style:[v.fileLabelsContainer,{width:G}],children:V.map(((e,t)=>(0,b.jsx)(l.default,{style:[v.fileLabel,{fontSize:12}],children:de?V[V.length-1-t]:e},`file-bottom-${e}`)))}),Pe(Z),(0,b.jsxs)(s.default,{style:v.bottomBar,children:[(0,b.jsxs)(s.default,{style:v.bottomLeft,children:[(0,b.jsx)(c.default,{source:{uri:de?W:P},style:[v.profilePicture,{width:Re(50),height:Re(50)}]}),(0,b.jsx)(l.default,{style:[v.userInfo,{fontSize:Re(18)}],children:de?L:B}),(0,b.jsx)(l.default,{style:[v.rating,{fontSize:Re(14)}],children:de?N:E})]}),(0,b.jsxs)(s.default,{style:v.bottomCenter,children:[(0,b.jsx)(l.default,{style:[v.timer,{fontSize:Re(32)}],children:De(de?be:ge)}),(0,b.jsx)(l.default,{style:[v.moveIndicator,{fontSize:Re(20)}],children:"ongoing"!==xe?" ":ae?de?" ":"White to move":de?"Black to move":" "})]}),(0,b.jsx)(s.default,{style:v.flipBoard,children:(0,b.jsx)(i.default,{children:(0,b.jsx)(m.default,{name:"flip",size:Re(30),color:"#ccc",onPress:()=>{ue(!de)}})})})]}),(0,b.jsx)(s.default,{children:(0,b.jsx)(l.default,{style:v.gameOverText,children:"ongoing"===xe?"white"===ie?"You are playing the white pieces":"You are playing the black pieces":"white"===xe?"White won":"black"===xe?"Black won":"Draw"})}),(0,b.jsxs)(s.default,{style:v.buttonContainer,children:[(0,b.jsxs)(i.default,{onPress:()=>{"ongoing"===xe&&fe&&fe.send(JSON.stringify({type:"offerDraw"}))},style:[v.button,{width:Ee}],children:[(0,b.jsx)(m.default,{name:"handshake",size:Re(30),color:"#fff"}),(0,b.jsx)(l.default,{style:[v.buttonText,{fontSize:Re(14)}],children:"Offer Draw"})]}),(0,b.jsxs)(i.default,{onPress:()=>{"ongoing"===xe&&fe&&fe.send(JSON.stringify({type:"resign"}))},style:[v.button,{width:Ee}],children:[(0,b.jsx)(m.default,{name:"flag",size:Re(30),color:"#fff"}),(0,b.jsx)(l.default,{style:[v.buttonText,{fontSize:Re(14)}],children:"Resign"})]}),(0,b.jsxs)(i.default,{onPress:()=>{"????"!==B&&"????"!==L&&"Stockfish"!==B&&"Stockfish"!==L&&(q(null),$(null),Ce(!ke))},style:[v.button,{width:Ee}],children:[(0,b.jsx)(m.default,{name:"chat",size:Re(30),color:"#fff"}),(0,b.jsx)(l.default,{style:[v.buttonText,{fontSize:Re(14)}],children:"Chat"})]}),ke&&(0,b.jsxs)(s.default,{style:v.chatContainer,children:[(0,b.jsx)(r.default,{children:ye.map(((e,t)=>(0,b.jsx)(l.default,{style:v.chatMessage,children:e},t)))}),(0,b.jsxs)(s.default,{style:v.chatInputContainer,children:[(0,b.jsx)(d.default,{style:v.chatInput,value:je,onChangeText:Se,placeholder:"Type a message..."}),(0,b.jsx)(i.default,{style:v.sendButton,onPress:()=>{je.trim()&&fe&&(fe.send(JSON.stringify({type:"chat",message:je})),Se(""))},children:(0,b.jsx)(m.default,{name:"send",size:Re(20),color:"#fff"})})]})]})]})]})})}},2782:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var s=a(3929),l=a(6283),o=a(3668),n=a(558),r=a(2772),i=a(5648),c=a(484),d=a(5259),u=a(9637),f=a(9149),h=a(6665),g=a(2909),m=a(397);const b=["P","N","B","R","Q","K"],p=["p","n","b","r","q","k"],x="chessmate-production.up.railway.app",w={P:a(9708),N:a(6434),B:a(5214),R:a(4798),Q:a(7221),K:a(4799),p:a(4267),n:a(213),b:a(1769),r:a(409),q:a(9442),k:a(9736)};let y=[["r","n","b","q","k","b","n","r"],["p","p","p","p","p","p","p","p"],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["P","P","P","P","P","P","P","P"],["R","N","B","Q","K","B","N","R"]];const A=({boardSize:e,boardState:t,fliped:a})=>{const l=e/8,o=(e,t)=>a?{row:7-e,col:7-t}:{row:e,col:t};return(0,m.jsxs)(s.default,{style:{width:e,height:e},children:[(0,m.jsx)(g.default,{width:e,height:e,children:(()=>{const e=[];for(let t=0;t<8;t++)for(let a=0;a<8;a++){const{row:s,col:n}=o(t,a),r=n*l,i=s*l,c=(t+a)%2===0?"#c3c2c2":"#504d55";e.push((0,m.jsx)(g.Rect,{x:r,y:i,width:l,height:l,fill:c},`square-${t}-${a}`))}return e})()}),(()=>{const e=[];for(let a=0;a<8;a++)for(let s=0;s<8;s++){const n=t[a][s];if(n){const{row:t,col:r}=o(a,s),i=r*l,d=t*l;e.push((0,m.jsx)(c.default,{source:w[n],style:{position:"absolute",left:i,top:d,width:l,height:l}},`piece-${a}-${s}`))}}return e})()]})},j=o.default.create({container:{justifyContent:"center",alignItems:"center",backgroundColor:"#444"},topBar:{flexDirection:"row",alignItems:"center",width:"100%",paddingHorizontal:20,marginTop:20},backArrow:{flex:1,alignItems:"flex-start"},flipBoard:{flex:1,alignItems:"flex-end"},topCenter:{flex:2,alignItems:"center"},topRight:{flex:1,alignItems:"flex-end"},profilePicture:{borderRadius:25},analysisIndicator:{fontWeight:"bold",textAlign:"center",color:"#ccc",marginVertical:5},moveIndicator:{fontWeight:"bold",textAlign:"center",color:"#ccc",marginTop:10},userInfo:{fontWeight:"bold",color:"#888"},rating:{color:"#ccc"},boardWithLabelsContainer:{flexDirection:"row",alignItems:"center"},rankLabelsContainer:{justifyContent:"space-between",marginHorizontal:5},rankLabel:{color:"#ccc"},fileLabelsContainer:{flexDirection:"row",marginVertical:5},fileLabel:{color:"#ccc",textAlign:"center",flex:1},bottomBar:{flexDirection:"row",alignItems:"center",width:"100%",paddingHorizontal:20,marginBottom:10},bottomLeft:{flex:1,alignItems:"flex-start"},bottomCenter:{flex:2,alignItems:"center"},buttonContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:20},button:{alignItems:"center",borderWidth:2,borderColor:"#ccc",backgroundColor:"#888",paddingVertical:10,borderRadius:5},analyseButton:{alignItems:"center",backgroundColor:"#000",padding:15,borderRadius:5}}),S=()=>{const e=(0,u.useLocalSearchParams)().archive,[t,a]=(0,h.useState)(!0),[o,g]=(0,h.useState)(null),[w,S]=(0,h.useState)({bestmove:"Press button to analyse",evaluation:""}),[k,C]=(0,h.useState)(!1),[v,z]=(0,h.useState)(-1),[I,B]=(0,h.useState)("????"),[T,P]=(0,h.useState)("https://"+x+"/uploads/_.png"),[R,E]=(0,h.useState)("????"),[D,L]=(0,h.useState)("????"),[O,W]=(0,h.useState)("https://"+x+"/uploads/_.png"),[M,N]=(0,h.useState)("????"),{width:Q,height:_}=(0,n.default)(),H=Q>_?.9*_:.9*Q,G=["A","B","C","D","E","F","G","H"],V=["1","2","3","4","5","6","7","8"].reverse(),[J,U]=(0,h.useState)("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),[K,F]=(0,h.useState)(y),[$,Y]=(0,h.useState)(!1);(0,u.useRouter)();(0,h.useEffect)((()=>{t&&(async()=>{let e;try{const t=await d.default.getItem("token");e=await fetch("https://"+x+"/verify?token="+t),a(!1)}catch(t){return void a(!1)}e.json().then((e=>{"1"===e.code&&q()}))})()}),[]);const q=async()=>{window.location.href="https://lorinpet.github.io/chessmate_web"},Z=e=>{U(e);const t=e.split(" ")[0],a=[["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""]];let s=0;for(let l=0;l<8;l++)for(let e=0;e<8;e++)["1","2","3","4","5","6","7","8"].includes(t[s])?(e+=parseInt(t[s]),e--):(b.includes(t[s])||p.includes(t[s]))&&(a[l][e]=t[s]),s++,"/"===t[s]&&s++;y=a,F(a)};(0,h.useEffect)((()=>{"????"===I&&"????"===D&&((async()=>{const t=await fetch("https://"+x+"/game?gameId="+e),a=await t.json(),s=await a.message.white_player,l=await fetch("https://"+x+"/player?playerId="+s),o=await l.json(),n=await a.message.black_player,r=await fetch("https://"+x+"/player?playerId="+n),i=await r.json(),c=await o.message.username;B(c);const d=await i.message.username;L(d);const u=await o.message.profile_picture_url,f=await fetch("https://"+x+"/"+u);P(f.url);const h=await i.message.profile_picture_url,g=await fetch("https://"+x+"/"+h);W(g.url);const m=await a.message.time_control;if(["60+0","120+1","180+0"].includes(m)){const e=await o.message.bullet_rating;E(e);const t=await i.message.bullet_rating;N(t)}else if(["180+2","300+0","300+3"].includes(m)){const e=await o.message.blitz_rating;E(e);const t=await i.message.blitz_rating;N(t)}else if(["600+0","600+5","900+0"].includes(m)){const e=await o.message.rapid_rating;E(e);const t=await i.message.rapid_rating;N(t)}else if(["900+10","1800+0","1800+20"].includes(m)){const e=await o.message.classical_rating;E(e);const t=await i.message.classical_rating;N(t)}const b=await a.message.starting_position;Z(b)})(),(async()=>{(await fetch("https://"+x+"/fetch?archive="+e)).json().then((e=>g(e.game)))})())}),[]);const X=e=>{const t=Math.min(_/800,Q/400,2);return Math.max(e*t,2)},ee=.25*Q;return(0,m.jsx)(r.default,{children:(0,m.jsxs)(s.default,{style:[j.container,{minHeight:_}],children:[(0,m.jsxs)(s.default,{style:j.topBar,children:[(0,m.jsx)(s.default,{style:j.backArrow,children:(0,m.jsx)(u.Link,{href:"profile",children:(0,m.jsx)(s.default,{children:(0,m.jsx)(f.default,{name:"arrow-back",size:X(30),color:"#ccc"})})})}),(0,m.jsxs)(s.default,{style:j.topCenter,children:[(0,m.jsx)(l.default,{style:[j.analysisIndicator,{fontSize:X(20)}],children:"bestmove (none)"===w.bestmove.trim()?"No possible move":w.bestmove.trim()}),(0,m.jsx)(l.default,{style:[j.analysisIndicator,{fontSize:X(20)}],children:"bestmove (none)"===w.bestmove.trim()?"":w.evaluation.trim()})]}),(0,m.jsxs)(s.default,{style:j.topRight,children:[(0,m.jsx)(c.default,{source:{uri:$?T:O},style:[j.profilePicture,{width:X(50),height:X(50)}]}),(0,m.jsx)(l.default,{style:[j.userInfo,{fontSize:X(18)}],children:$?I:D}),(0,m.jsx)(l.default,{style:[j.rating,{fontSize:X(14)}],children:$?R:M})]})]}),(0,m.jsx)(s.default,{style:[j.fileLabelsContainer,{width:H}],children:G.map(((e,t)=>(0,m.jsx)(l.default,{style:[j.fileLabel,{fontSize:12}],children:$?G[G.length-1-t]:e},`file-top-${e}`)))}),(0,m.jsxs)(s.default,{style:j.boardWithLabelsContainer,children:[(0,m.jsx)(s.default,{style:j.rankLabelsContainer,children:V.map(((e,t)=>(0,m.jsx)(l.default,{style:[j.rankLabel,{marginVertical:H/26,fontSize:12}],children:$?V[V.length-1-t]:e},`rank-${e}`)))}),(0,m.jsx)(s.default,{children:(0,m.jsx)(A,{boardSize:H,boardState:K,fliped:$})}),(0,m.jsx)(s.default,{style:j.rankLabelsContainer,children:V.map(((e,t)=>(0,m.jsx)(l.default,{style:[j.rankLabel,{marginVertical:H/26,fontSize:12}],children:$?V[V.length-1-t]:e},`rank-right-${e}`)))})]}),(0,m.jsx)(s.default,{style:[j.fileLabelsContainer,{width:H}],children:G.map(((e,t)=>(0,m.jsx)(l.default,{style:[j.fileLabel,{fontSize:12}],children:$?G[G.length-1-t]:e},`file-bottom-${e}`)))}),(0,m.jsxs)(s.default,{style:j.bottomBar,children:[(0,m.jsxs)(s.default,{style:j.bottomLeft,children:[(0,m.jsx)(c.default,{source:{uri:$?O:T},style:[j.profilePicture,{width:X(50),height:X(50)}]}),(0,m.jsx)(l.default,{style:[j.userInfo,{fontSize:X(18)}],children:$?D:I}),(0,m.jsx)(l.default,{style:[j.rating,{fontSize:X(14)}],children:$?M:R})]}),(0,m.jsxs)(s.default,{style:j.bottomCenter,children:[(0,m.jsx)(i.default,{onPress:async()=>{const e=[];o?.moves.forEach((t=>{e.length<=v&&e.push(t.uci)})),C(!0);(await fetch("https://"+x+"/analyse?fen="+J+"&moves="+e.join(" "))).json().then((e=>S(e))),C(!1)},style:[j.analyseButton,{width:ee}],children:(0,m.jsx)(l.default,{style:[j.analysisIndicator,{fontSize:X(16)}],children:k?"ANALYSING":"ANALYSE"})}),(0,m.jsx)(l.default,{style:[j.moveIndicator,{fontSize:X(16)}],children:-1===v?"Start position":o?.moves[v].uci})]}),(0,m.jsx)(s.default,{style:j.flipBoard,children:(0,m.jsx)(i.default,{children:(0,m.jsx)(f.default,{name:"flip",size:X(30),color:"#ccc",onPress:()=>{Y(!$)}})})})]}),(0,m.jsxs)(s.default,{style:j.buttonContainer,children:[(0,m.jsx)(i.default,{onPress:()=>{-1!==v&&S({bestmove:"Press button to analyse",evaluation:""});const e=y;z(-1),F(e)},style:[j.button,{width:ee}],children:(0,m.jsx)(f.default,{name:"keyboard-double-arrow-left",size:X(30),color:"#fff"})}),(0,m.jsx)(i.default,{onPress:()=>{if(-1!==v){S({bestmove:"Press button to analyse",evaluation:""});const e=v-1!==-1?JSON.parse(o?.moves[v-1].fen):y;z(Math.max(v-1,-1)),F(e)}},style:[j.button,{width:ee}],children:(0,m.jsx)(f.default,{name:"keyboard-arrow-left",size:X(30),color:"#fff"})}),(0,m.jsx)(i.default,{onPress:()=>{const e=o?.moves.length?o?.moves.length-1:-1;if(-1!==e&&v!==e){S({bestmove:"Press button to analyse",evaluation:""});const t=JSON.parse(o?.moves[v+1].fen);z(Math.min(v+1,e)),F(t)}},style:[j.button,{width:ee}],children:(0,m.jsx)(f.default,{name:"keyboard-arrow-right",size:X(30),color:"#fff"})}),(0,m.jsx)(i.default,{onPress:()=>{const e=o?.moves.length?o?.moves.length-1:-1;if(-1===e)return;v!==e&&S({bestmove:"Press button to analyse",evaluation:""});const t=JSON.parse(o?.moves[e].fen);z(e),F(t)},style:[j.button,{width:ee}],children:(0,m.jsx)(f.default,{name:"keyboard-double-arrow-right",size:X(30),color:"#fff"})})]})]})})}},3296:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(2772),l=a(558),o=a(3929),n=a(6283),r=a(3668),i=a(484),c=a(9637),d=a(397);const u=r.default.create({container:{flex:1,overflow:"hidden",justifyContent:"center",alignItems:"center",padding:20,backgroundColor:"#444"},image:{width:250,height:250,marginBottom:25},title:{fontSize:28,fontWeight:"bold",marginBottom:15,color:"#ccc",textAlign:"center"},subtitle:{fontSize:18,color:"#ccc",textAlign:"center",marginBottom:30,paddingHorizontal:20},button:{backgroundColor:"#08f",paddingVertical:12,paddingHorizontal:30,borderRadius:25,marginBottom:15,textAlign:"center",width:"100%"},buttonText:{color:"#fff",fontSize:18}}),f=()=>(0,d.jsx)(s.default,{children:(0,d.jsxs)(o.default,{style:[u.container,{minHeight:(0,l.default)().height}],children:[(0,d.jsx)(i.default,{source:a(7877),style:u.image,resizeMode:"contain"}),(0,d.jsx)(n.default,{style:u.title,children:"Oops! Page Not Found"}),(0,d.jsx)(n.default,{style:u.subtitle,children:"The page you're looking for doesn't exist or has been moved."}),(0,d.jsx)(c.Link,{href:"login",style:u.button,children:(0,d.jsx)(n.default,{style:u.buttonText,children:"Go to Home"})})]})})},4267:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/bp.da9574b36b574994f5f4.png"},4798:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAQAAAD2e2DtAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRAD/h4/MvwAAAAd0SU1FB+kCFhQZERiyOY8AAAABb3JOVAHPoneaAAACjUlEQVR42u3c0U6kQBCGUcbs+7/y7IXrumtEmgBDV/3n3JkYbYePahgmLgsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADDqcfcCdnle9lf8+5MfA9+zptbruSzL290L4F6/7l7AKf4/N4+cwXFMgHAlJ8DHqXzPhvvdICm39f9VMoAPXw/F2GG47kqyIltAOAGEE0A4AYQTQDgBhBNAOAGEE0A4AYQr/VbwCk/9dugYwFFRAdkCwrWaAFGn7klMgHCtJsAxmfPDBAgngHACCCeAcAIIJ4BwJW8D93yA+/jNXe+Pi5sA4UpOgFfofd5/MgHC1ZoAr938j/z2MmoFMO68w9/ysH+yBYQTwJbmDwkFEK55AM1P3xM0D4AtAliRMjsEEE4A4QQQTgDhBBBOAOE6PgxKuYM7hQkQTgDhBLCt9ZbS8Rrgj9bH7TQmQDgBhBPAqowtRADhBBBOAOEEEE4A4QQQTgDh+gWQcft+mn4BsIsAwglgRONtpW0AjY/ZqdoGwBgBhBPAD54BG4kAwgkgnADCCSCcAMJ1C6D/ZfvJugXATgIIJ4Axbd8TahpA06N1gaYBMEoA4QSwoftmIoBwAggngHACCCeAcAIIJ4BwvQLoftN+gV4BsJsAxrWcLwII1/BfxbY8US9jAoQTwKbeE0UA4QQQbv6LwJkm8J61PO5e7BgTINzsAcx0/rdc+cwBVP8sfonVz7xTPVe/mNjjxy/nM+8EKHn4K6303bwB8BIFAqh2KVBrtQUCqKdSstMHUOelrGn6ALiWAMIJINz0D4OmfyelOBMgnADCCQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9voNig034GvS+m4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjUtMDItMjJUMjA6MjQ6MzIrMDA6MDDJxOm7AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDI1LTAyLTIyVDIwOjI0OjMyKzAwOjAwuJlRBwAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyNS0wMi0yMlQyMDoyNToxNyswMDowMBBTMzwAAAAASUVORK5CYII="},4799:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/wk.ec21e18f35a7dd2f60e5.png"},5111:(e,t,a)=>{"use strict";a.r(t),a.d(t,{basePath:()=>r,default:()=>n,unstable_settings:()=>o});var s=a(9637),l=a(397);const o={initialRouteName:"index"};function n(){return(0,l.jsx)(s.Stack,{screenOptions:{headerShown:!1}})}const r="/chessmate_web"},5214:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/wb.6d42acc96bfe407620d6.png"},5250:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(1739);function l(){return(0,s.default)()}},5445:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(2772),l=a(558),o=a(3668),n=a(6283),r=a(3929),i=a(6773),c=a(5648),d=a(484),u=a(5259),f=a(9637),h=a(6665),g=a(397);const m=o.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"#444"},title:{fontSize:32,fontWeight:"bold",marginBottom:40,color:"#fff"},profileImage:{width:200,height:200,borderRadius:50,marginBottom:10},input:{width:"80%",height:50,backgroundColor:"#444",color:"#ccc",borderColor:"#ccc",borderWidth:2,borderRadius:2,paddingHorizontal:15,marginBottom:5,fontSize:18},success:{width:"80%",color:"#000",marginBottom:10,fontSize:18,fontWeight:"bold"},warning:{width:"80%",color:"#f00",marginBottom:10,fontSize:18,fontWeight:"bold"},button:{width:"80%",height:50,backgroundColor:"#fff",justifyContent:"center",alignItems:"center",borderRadius:5,marginBottom:5},buttonText:{color:"#08f",fontSize:18,fontWeight:"bold"},linkText:{color:"#08f",fontSize:18,fontWeight:"bold",marginVertical:10}}),b=()=>{const[e,t]=(0,h.useState)(!0),[o,b]=(0,h.useState)(""),[p,x]=(0,h.useState)(""),[w,y]=(0,h.useState)(""),[A,j]=(0,h.useState)(""),[S,k]=(0,h.useState)({username:!1,email:!1,password:!1,confirmPassword:!1}),[C,v]=(0,h.useState)("-1"),[z,I]=(0,h.useState)(!1),B=(0,f.useRouter)(),T="chessmate-production.up.railway.app";(0,h.useEffect)((()=>{e&&(async()=>{let e;try{const a=await u.default.getItem("token");e=await fetch("https://"+T+"/verify?token="+a),t(!1)}catch(a){return void t(!1)}e.json().then((e=>{"0"===e.code&&B.push("dashboard")}))})()}),[]);return(0,g.jsx)(s.default,{children:(0,g.jsxs)(r.default,{style:[m.container,{minHeight:(0,l.default)().height}],children:[(0,g.jsx)(n.default,{style:m.title,children:"ChessMate"}),(0,g.jsx)(d.default,{source:a(7877),style:m.profileImage}),(0,g.jsx)(i.default,{style:m.input,placeholder:"USERNAME",placeholderTextColor:"#bbb",value:o,onChangeText:b}),S.username&&(0,g.jsx)(n.default,{style:m.warning,children:"Invalid username. Username must start with a letter and contain only letters, numbers, or underscores. Length must be between 3 and 15 characters."}),(0,g.jsx)(i.default,{style:m.input,placeholder:"EMAIL",placeholderTextColor:"#bbb",value:p,onChangeText:x,keyboardType:"email-address"}),S.email&&(0,g.jsx)(n.default,{style:m.warning,children:"Invalid email address."}),(0,g.jsx)(i.default,{style:m.input,placeholder:"PASSWORD",placeholderTextColor:"#bbb",value:w,onChangeText:y,secureTextEntry:!0}),S.password&&(0,g.jsx)(n.default,{style:m.warning,children:"Invalid password. Password must contain only letters, numbers, or underscores. Length must be between 8 and 32 characters."}),(0,g.jsx)(i.default,{style:m.input,placeholder:"CONFIRM PASSWORD",placeholderTextColor:"#bbb",value:A,onChangeText:j,secureTextEntry:!0}),S.confirmPassword&&(0,g.jsx)(n.default,{style:m.warning,children:"Passwords do not match."}),(0,g.jsx)(c.default,{style:m.button,onPress:async()=>{const e={username:!1,email:!1,password:!1,confirmPassword:!1};let t=!1;/^[A-Za-z][A-Za-z0-9_]{2,14}$/.test(o)||(e.username=!0,v("-1"),t=!0);/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p)||(e.email=!0,v("-1"),t=!0);if(/^[A-Za-z0-9_]{8,32}$/.test(w)?A!==w&&(e.confirmPassword=!0,v("-1"),t=!0):(e.password=!0,v("-1"),t=!0),k(e),!t){I(!0);try{const e=await fetch("https://"+T+"/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,email:p,password:w})});if(e.ok){const t=await e.json();v(t.message)}else{const t=await e.json();v(t.error)}}catch(a){v("4")}finally{I(!1)}}},disabled:z,children:(0,g.jsx)(n.default,{style:m.buttonText,children:z?"Registering...":"REGISTER"})}),"0"===C&&(0,g.jsx)(n.default,{style:m.success,children:"Registration successful! We've sent you a confirmation email to prove your identity."}),"-1"!==C&&"0"!==C&&(0,g.jsx)(n.default,{style:m.warning,children:"1"===C?"Invalid credentials.":"2"===C?"Username already taken.":"3"===C?"Email already taken.":"Unknown error."}),(0,g.jsx)(f.Link,{href:"login",style:m.linkText,children:(0,g.jsx)(n.default,{style:m.linkText,children:"Already have an account? Login."})})]})})}},6434:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/wn.20e67b73f3fc6d040d67.png"},7221:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/wq.56e72eee1943d5419265.png"},7353:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(2772),l=a(558),o=a(3668),n=a(6283),r=a(3929),i=a(6773),c=a(5648),d=a(484),u=a(5259),f=a(9637),h=a(6665),g=a(397);const m=o.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"#444"},title:{fontSize:32,fontWeight:"bold",marginBottom:40,color:"#fff"},profileImage:{width:200,height:200,borderRadius:50,marginBottom:10},input:{width:"80%",height:50,backgroundColor:"#444",color:"#ccc",borderColor:"#ccc",borderWidth:2,borderRadius:2,paddingHorizontal:15,marginBottom:5,fontSize:18},success:{width:"80%",color:"#000",marginBottom:10,fontSize:18,fontWeight:"bold"},warning:{width:"80%",color:"#f00",marginBottom:10,fontSize:18,fontWeight:"bold"},button:{width:"80%",height:50,backgroundColor:"#fff",justifyContent:"center",alignItems:"center",borderRadius:5,marginBottom:5},buttonText:{color:"#08f",fontSize:18,fontWeight:"bold"},linkText:{color:"#08f",fontSize:18,fontWeight:"bold",marginVertical:10}}),b=()=>{const{email:e}=(0,f.useLocalSearchParams)(),[t,o]=(0,h.useState)(!0),[b,p]=(0,h.useState)(""),[x,w]=(0,h.useState)(""),[y,A]=(0,h.useState)(""),[j,S]=(0,h.useState)({code:!1,password:!1,confirmPassword:!1}),[k,C]=(0,h.useState)("-1"),[v,z]=(0,h.useState)(!1),I=(0,f.useRouter)(),B="chessmate-production.up.railway.app";(0,h.useEffect)((()=>{t&&(async()=>{let e;try{const t=await u.default.getItem("token");e=await fetch("https://"+B+"/verify?token="+t),o(!1)}catch(t){return void o(!1)}e.json().then((e=>{"0"===e.code&&I.push("dashboard")}))})()}),[]);return(0,g.jsx)(s.default,{children:(0,g.jsxs)(r.default,{style:[m.container,{minHeight:(0,l.default)().height}],children:[(0,g.jsx)(n.default,{style:m.title,children:"ChessMate"}),(0,g.jsx)(d.default,{source:a(7877),style:m.profileImage}),(0,g.jsx)(n.default,{style:m.success,children:"Please enter the code we've sent on given email address."}),(0,g.jsx)(i.default,{style:m.input,placeholder:"RESET CODE",placeholderTextColor:"#bbb",value:b,onChangeText:p,keyboardType:"numeric"}),j.code&&(0,g.jsx)(n.default,{style:m.warning,children:"Invalid code."}),(0,g.jsx)(i.default,{style:m.input,placeholder:"NEW PASSWORD",placeholderTextColor:"#bbb",value:x,onChangeText:w,secureTextEntry:!0}),j.password&&(0,g.jsx)(n.default,{style:m.warning,children:"Invalid password. Password must contain only letters, numbers, or underscores. Length must be between 8 and 32 characters."}),(0,g.jsx)(i.default,{style:m.input,placeholder:"CONFIRM PASSWORD",placeholderTextColor:"#bbb",value:y,onChangeText:A,secureTextEntry:!0}),j.confirmPassword&&(0,g.jsx)(n.default,{style:m.warning,children:"Passwords do not match."}),(0,g.jsx)(c.default,{style:m.button,onPress:async()=>{const t={code:!1,password:!1,confirmPassword:!1};let a=!1;/^\d{6}$/.test(b)||(t.code=!0,C("-1"),a=!0);if(/^[A-Za-z0-9_]{8,32}$/.test(x)?y!==x&&(t.confirmPassword=!0,C("-1"),a=!0):(t.password=!0,C("-1"),a=!0),S(t),!a){z(!0);try{const t=await fetch("https://"+B+"/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,resetCode:b,newPassword:x})});if(t.ok){const e=await t.json();C(e.message)}else{const e=await t.json();C(e.error)}}catch(s){C("4")}finally{z(!1)}}},disabled:v,children:(0,g.jsx)(n.default,{style:m.buttonText,children:v?"Resetting...":"RESET PASSWORD"})}),"0"===k&&(0,g.jsx)(n.default,{style:m.success,children:"Password reset successfully."}),"-1"!==k&&"0"!==k&&(0,g.jsx)(n.default,{style:m.warning,children:"1"===k?"Invalid code.":"2"===k?"Invalid email.":"3"===k?"Invalid or expired code.":"Unknown error."}),(0,g.jsx)(f.Link,{href:"login",style:m.linkText,children:(0,g.jsx)(n.default,{style:m.linkText,children:"Back to Login"})})]})})}},7877:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/cm.dacadaa485e5f9dcb699.png"},7901:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var s=a(3929),l=a(6283),o=a(3668),n=a(484),r=a(5648),i=a(2772),c=a(6773),d=a(5259),u=a(262),f=a(1385),h=a(9637),g=a(6665),m=a(397);const b=o.default.create({container:{padding:16,backgroundColor:"#444"},header:{flexDirection:"row",justifyContent:"space-between",marginBottom:20},headerText:{fontSize:24,color:"#fff",fontWeight:"bold"},profileSection:{alignItems:"center",marginBottom:20},profileImage:{width:100,height:100,borderRadius:50,marginBottom:10},cameraIcon:{position:"absolute",bottom:10,right:10,backgroundColor:"#0008",borderRadius:12,padding:4},userName:{fontSize:20,color:"#fff",fontWeight:"bold"},inputContainer:{marginBottom:20},label:{fontSize:18,fontWeight:"bold",color:"#fff",textAlign:"center",marginBottom:8},input:{backgroundColor:"#888",borderRadius:8,padding:16,color:"#fff",fontSize:18},warning:{width:"80%",color:"#f00",marginBottom:10,fontSize:18,fontWeight:"bold"},saveButton:{backgroundColor:"#00f",borderRadius:8,padding:16,alignItems:"center"},saveButtonText:{color:"#fff",fontSize:18,fontWeight:"bold"}}),p=()=>{const[e,t]=(0,g.useState)(!0),[a,o]=(0,g.useState)(""),[p,x]=(0,g.useState)(""),[w,y]=(0,g.useState)(""),[A,j]=(0,g.useState)(""),[S,k]=(0,g.useState)(""),[C,v]=(0,g.useState)("0"),[z,I]=(0,g.useState)(!1),B=((0,h.useRouter)(),"chessmate-production.up.railway.app");(0,g.useEffect)((()=>{e&&(async()=>{let e;try{const a=await d.default.getItem("token");e=await fetch("https://"+B+"/verify?token="+a),t(!1)}catch(a){return void t(!1)}e.json().then((e=>{"1"===e.code&&T()}))})()}),[]);const T=async()=>{window.location.href="https://lorinpet.github.io/chessmate_web"};(0,g.useEffect)((()=>{p||(async()=>{let e=await d.default.getItem("token");o(e||"");const t=await fetch("https://"+B+"/data?token="+e),a=await t.json(),s=await a.message.username,l=await a.message.profile_picture_url;x(s);const n=await fetch("https://"+B+"/"+l);y(n.url);const r=await a.message.description;j(r)})()}),[]);return(0,m.jsxs)(i.default,{style:b.container,children:[(0,m.jsxs)(s.default,{style:b.header,children:[(0,m.jsx)(h.Link,{href:"profile",children:(0,m.jsx)(s.default,{children:(0,m.jsx)(f.default,{name:"arrow-back",size:24,color:"#ccc"})})}),(0,m.jsx)(l.default,{style:b.headerText,children:"Settings"}),(0,m.jsx)(h.Link,{href:"dashboard",children:(0,m.jsx)(s.default,{children:(0,m.jsx)(f.default,{name:"menu",size:24,color:"#ccc"})})})]}),(0,m.jsxs)(s.default,{style:b.profileSection,children:[(0,m.jsxs)(r.default,{onPress:async()=>{try{const e=await u.launchImageLibraryAsync({mediaTypes:"images",allowsEditing:!0,quality:.8,base64:!0});e.assets&&k(e.assets[0])}catch(e){alert("Invalid image!")}},children:[(0,m.jsx)(n.default,{source:S||{uri:w},style:b.profileImage}),(0,m.jsx)(f.default,{name:"camera",size:24,color:"#ccc",style:b.cameraIcon})]}),(0,m.jsx)(l.default,{style:b.userName,children:p})]}),(0,m.jsxs)(s.default,{style:b.inputContainer,children:[(0,m.jsx)(l.default,{style:b.label,children:"Description"}),(0,m.jsx)(c.default,{style:b.input,multiline:!0,numberOfLines:4,value:A,onChangeText:j})]}),"0"!==C&&(0,m.jsx)(l.default,{style:b.warning,children:"1"===C?"Invalid image.":"2"===C?"Unable to save image.":"Unknown error."}),(0,m.jsx)(r.default,{onPress:async()=>{I(!0);try{S.base64||v("1");let e="jpg";S.uri&&(e=S.uri.split("/")[1].split(";")[0].toLowerCase());["jpg","jpeg","png"].includes(e)||v("1");const t=await fetch("https://"+B+"/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a,image:S.base64,filename:`image_${Date.now()}.${e}`,description:A})}),s=await t.json();t.ok?v(s.message):v(s.error)}catch(e){v("3")}finally{I(!1)}},style:b.saveButton,disabled:z,children:(0,m.jsx)(l.default,{style:b.saveButtonText,children:z?"Saving...":"SAVE"})})]})}},8415:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var s=a(3929),l=a(6283),o=a(3668),n=a(484),r=a(5648),i=a(2772),c=a(932),d=a(5259),u=a(1410),f=a(1385),h=a(9637),g=a(6665),m=a(397);const b=o.default.create({container:{flex:1,padding:16,backgroundColor:"#444"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:20},headerText:{fontSize:24,color:"#fff",fontWeight:"bold"},profileSection:{alignItems:"center",marginBottom:20},profileImage:{width:100,height:100,borderRadius:50,marginBottom:10},userName:{fontSize:20,color:"#fff",fontWeight:"bold"},userDescription:{fontSize:18,color:"#fff",textAlign:"center",marginBottom:20},buttonContainer:{flexDirection:"row",justifyContent:"space-between",backgroundColor:"#888",borderRadius:5,marginBottom:20},button:{backgroundColor:"#ccc",paddingVertical:10,paddingHorizontal:20,marginHorizontal:20,borderRadius:5},buttonText:{fontSize:18,fontWeight:"bold"},statContainer:{backgroundColor:"#888",borderRadius:8,padding:16},statRow:{flexDirection:"row",justifyContent:"space-between",marginBottom:8},statLabel:{fontSize:18},statValue:{fontSize:18,fontWeight:"bold"},dropdownContainer:{backgroundColor:"#fff",borderRadius:8,padding:16,marginBottom:16,alignItems:"center"},gameItem:{flexDirection:"row",padding:10,marginVertical:5,backgroundColor:"#ccc",borderRadius:5,justifyContent:"space-between"},gameText:{backgroundColor:"#888",fontWeight:"bold",color:"#fff",borderRadius:5,padding:10,margin:5},emptyText:{color:"#ccc",textAlign:"center",marginVertical:20}}),p=()=>{const[e,t]=(0,g.useState)(!0),[a,o]=(0,g.useState)(""),[p,x]=(0,g.useState)(""),[w,y]=(0,g.useState)(""),[A,j]=(0,g.useState)(""),[S,k]=(0,g.useState)({bullet:0,blitz:0,rapid:0,classical:0,all:0}),[C,v]=(0,g.useState)({bulletWins:0,bulletLosses:0,bulletDraws:0,bulletGames:0,blitzWins:0,blitzLosses:0,blitzDraws:0,blitzGames:0,rapidWins:0,rapidLosses:0,rapidDraws:0,rapidGames:0,classicalWins:0,classicalLosses:0,classicalDraws:0,classicalGames:0,allWins:0,allLosses:0,allDraws:0,allGames:0}),[z,I]=(0,g.useState)([]),[B,T]=(0,g.useState)(!0),[P,R]=(0,g.useState)(null),E=(0,h.useRouter)(),D="chessmate-production.up.railway.app";(0,g.useEffect)((()=>{e&&(async()=>{let e;try{const a=await d.default.getItem("token");e=await fetch("https://"+D+"/verify?token="+a),t(!1)}catch(a){return void t(!1)}e.json().then((e=>{"1"===e.code&&L()}))})()}),[]);const L=async()=>{window.location.href="https://lorinpet.github.io/chessmate_web"};(0,g.useEffect)((()=>{p||(async()=>{let e=await d.default.getItem("token");o(e||"");const t=await fetch("https://"+D+"/data?token="+e),a=await t.json(),s=await a.message.username,l=await a.message.profile_picture_url;x(s);const n=await fetch("https://"+D+"/"+l);y(n.url);const r=await a.message.description;j(r);const i=await a.message.bullet_rating,c=await a.message.blitz_rating,u=await a.message.rapid_rating,f=await a.message.classical_rating;k({bullet:i,blitz:c,rapid:u,classical:f,all:Math.round((i+c+u+f)/4)});const h=await a.message.bullet_wins,g=await a.message.bullet_losses,m=await a.message.bullet_draws,b=await a.message.blitz_wins,p=await a.message.blitz_losses,w=await a.message.blitz_draws,A=await a.message.rapid_wins,S=await a.message.rapid_losses,C=await a.message.rapid_draws,z=await a.message.classical_wins,I=await a.message.classical_losses,B=await a.message.classical_draws;v({bulletWins:h,bulletLosses:g,bulletDraws:m,bulletGames:h+g+m,blitzWins:b,blitzLosses:p,blitzDraws:w,blitzGames:b+p+w,rapidWins:A,rapidLosses:S,rapidDraws:C,rapidGames:A+S+C,classicalWins:z,classicalLosses:I,classicalDraws:B,classicalGames:z+I+B,allWins:h+b+A+z,allLosses:g+p+S+I,allDraws:m+w+C+B,allGames:h+b+A+z+g+p+S+I+m+w+C+B})})()}),[]);return(0,m.jsxs)(i.default,{style:b.container,children:[(0,m.jsxs)(s.default,{style:b.header,children:[(0,m.jsx)(h.Link,{href:"dashboard",children:(0,m.jsx)(s.default,{children:(0,m.jsx)(f.default,{name:"arrow-back",size:24,color:"#ccc"})})}),(0,m.jsx)(l.default,{style:b.headerText,children:"Profile"}),(0,m.jsx)(h.Link,{href:"settings",children:(0,m.jsx)(s.default,{children:(0,m.jsx)(f.default,{name:"settings",size:24,color:"#ccc"})})})]}),(0,m.jsxs)(s.default,{style:b.profileSection,children:[(0,m.jsx)(n.default,{source:{uri:w},style:b.profileImage}),(0,m.jsx)(l.default,{style:b.userName,children:p})]}),(0,m.jsx)(l.default,{style:b.userDescription,children:A}),(0,m.jsxs)(s.default,{style:b.buttonContainer,children:[(0,m.jsx)(r.default,{style:b.button,onPress:()=>{T(!0)},children:(0,m.jsx)(l.default,{style:b.buttonText,children:"Stats"})}),(0,m.jsx)(r.default,{style:b.button,onPress:()=>{(async()=>{(await fetch("https://"+D+"/archives?token="+a)).json().then((e=>{e.sort(((e,t)=>t.completed_at.localeCompare(e.completed_at))),I(e)}))})(),T(!1)},children:(0,m.jsx)(l.default,{style:b.buttonText,children:"Games"})})]}),B?(0,m.jsxs)(s.default,{style:b.statContainer,children:[(0,m.jsx)(s.default,{style:b.dropdownContainer,children:(0,m.jsx)(u.default,{onValueChange:e=>R(e),items:[{label:"Bullet",value:"bullet"},{label:"Blitz",value:"blitz"},{label:"Rapid",value:"rapid"},{label:"Classical",value:"classical"}],placeholder:{label:"All",value:"all"}})}),(0,m.jsxs)(s.default,{style:b.statRow,children:[(0,m.jsx)(l.default,{style:b.statLabel,children:"Rating"}),(0,m.jsx)(l.default,{style:b.statValue,children:"bullet"===P?S.bullet:"blitz"===P?S.blitz:"rapid"===P?S.rapid:"classical"===P?S.classical:S.all})]}),(0,m.jsxs)(s.default,{style:b.statRow,children:[(0,m.jsx)(l.default,{style:b.statLabel,children:"Games Played"}),(0,m.jsx)(l.default,{style:b.statValue,children:"bullet"===P?C.bulletGames:"blitz"===P?C.blitzGames:"rapid"===P?C.rapidGames:"classical"===P?C.classicalGames:C.allGames})]}),(0,m.jsxs)(s.default,{style:b.statRow,children:[(0,m.jsx)(l.default,{style:b.statLabel,children:"Wins"}),(0,m.jsx)(l.default,{style:b.statValue,children:"bullet"===P?C.bulletWins:"blitz"===P?C.blitzWins:"rapid"===P?C.rapidWins:"classical"===P?C.classicalWins:C.allWins})]}),(0,m.jsxs)(s.default,{style:b.statRow,children:[(0,m.jsx)(l.default,{style:b.statLabel,children:"Losses"}),(0,m.jsx)(l.default,{style:b.statValue,children:"bullet"===P?C.bulletLosses:"blitz"===P?C.blitzLosses:"rapid"===P?C.rapidLosses:"classical"===P?C.classicalLosses:C.allLosses})]}),(0,m.jsxs)(s.default,{style:b.statRow,children:[(0,m.jsx)(l.default,{style:b.statLabel,children:"Draws"}),(0,m.jsx)(l.default,{style:b.statValue,children:"bullet"===P?C.bulletDraws:"blitz"===P?C.blitzDraws:"rapid"===P?C.rapidDraws:"classical"===P?C.classicalDraws:C.allDraws})]}),(0,m.jsxs)(s.default,{style:b.statRow,children:[(0,m.jsx)(l.default,{style:b.statLabel,children:"Win Rate"}),(0,m.jsxs)(l.default,{style:b.statValue,children:["bullet"===P?0===Number(C.bulletGames)?0:(100*Number(C.bulletWins)/Number(C.bulletGames)).toFixed(2):"blitz"===P?0===Number(C.blitzGames)?0:(100*Number(C.blitzWins)/Number(C.blitzGames)).toFixed(2):"rapid"===P?0===Number(C.rapidGames)?0:(100*Number(C.rapidWins)/Number(C.rapidGames)).toFixed(2):"classical"===P?0===Number(C.classicalGames)?0:(100*Number(C.classicalWins)/Number(C.classicalGames)).toFixed(2):0===Number(C.allGames)?0:(100*Number(C.allWins)/Number(C.allGames)).toFixed(2),"%"]})]})]}):(0,m.jsx)(c.default,{data:z,keyExtractor:e=>e.id,renderItem:({item:e})=>(0,m.jsx)(i.default,{horizontal:!0,showsHorizontalScrollIndicator:!1,children:(0,m.jsxs)(r.default,{style:b.gameItem,onPress:()=>{var t;t=e.id,E.push(`archive?archive=${t}`)},children:[(0,m.jsx)(l.default,{style:b.gameText,children:e.user}),(0,m.jsx)(l.default,{style:b.gameText,children:e.rating}),(0,m.jsx)(l.default,{style:b.gameText,children:e.color}),(0,m.jsx)(l.default,{style:b.gameText,children:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"===e.starting_position?"Standard":"Custom"}),(0,m.jsx)(l.default,{style:b.gameText,children:e.time_control}),(0,m.jsx)(l.default,{style:b.gameText,children:"white"===e.result?"White\xa0won":"black"===e.result?"Black\xa0won":"Draw"}),(0,m.jsx)(l.default,{style:b.gameText,children:e.completed_at.substring(0,10).replace("-","\u2011").replace("-","\u2011")})]})}),ListEmptyComponent:(0,m.jsx)(l.default,{style:b.emptyText,children:"No games in the archive"})})]})}},8973:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(2772),l=a(558),o=a(3929),n=a(6283),r=a(3668),i=a(484),c=a(9637),d=a(397);const u=r.default.create({container:{flex:1,overflow:"hidden",justifyContent:"center",alignItems:"center",padding:20,backgroundColor:"#444"},image:{width:250,height:250,marginBottom:25},title:{fontSize:28,fontWeight:"bold",marginBottom:15,color:"#ccc",textAlign:"center"},subtitle:{fontSize:18,color:"#ccc",textAlign:"center",marginBottom:30,paddingHorizontal:20},button:{backgroundColor:"#08f",paddingVertical:12,paddingHorizontal:30,borderRadius:25,marginBottom:15,textAlign:"center",width:"100%"},buttonText:{color:"#fff",fontSize:18}}),f=()=>(0,d.jsx)(s.default,{children:(0,d.jsxs)(o.default,{style:[u.container,{minHeight:(0,l.default)().height}],children:[(0,d.jsx)(i.default,{source:a(7877),style:u.image,resizeMode:"contain"}),(0,d.jsx)(n.default,{style:u.title,children:"Oops! Page Not Found"}),(0,d.jsx)(n.default,{style:u.subtitle,children:"The page you're looking for doesn't exist or has been moved."}),(0,d.jsx)(c.Link,{href:"login",style:u.button,children:(0,d.jsx)(n.default,{style:u.buttonText,children:"Go to Home"})})]})})},9099:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(2772),l=a(558),o=a(3668),n=a(6283),r=a(3929),i=a(6773),c=a(5648),d=a(484),u=a(5259),f=a(9637),h=a(6665),g=a(397);const m=o.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"#444"},title:{fontSize:32,fontWeight:"bold",marginBottom:40,color:"#fff"},profileImage:{width:200,height:200,borderRadius:50,marginBottom:10},input:{width:"80%",height:50,backgroundColor:"#444",color:"#ccc",borderColor:"#ccc",borderWidth:2,borderRadius:2,paddingHorizontal:15,marginBottom:5,fontSize:18},warning:{width:"80%",color:"#f00",marginBottom:10,fontSize:18,fontWeight:"bold"},button:{width:"80%",height:50,backgroundColor:"#fff",justifyContent:"center",alignItems:"center",borderRadius:5,marginBottom:5},buttonText:{color:"#08f",fontSize:18,fontWeight:"bold"},linkText:{color:"#08f",fontSize:18,fontWeight:"bold",marginVertical:10}}),b=()=>{const[e,t]=(0,h.useState)(!0),[o,b]=(0,h.useState)(""),[p,x]=(0,h.useState)(!1),[w,y]=(0,h.useState)("0"),[A,j]=(0,h.useState)(!1),S=(0,f.useRouter)(),k="chessmate-production.up.railway.app";(0,h.useEffect)((()=>{e&&(async()=>{let e;try{const a=await u.default.getItem("token");e=await fetch("https://"+k+"/verify?token="+a),t(!1)}catch(a){return void t(!1)}e.json().then((e=>{"0"===e.code&&S.push("dashboard")}))})()}),[]);return(0,g.jsx)(s.default,{children:(0,g.jsxs)(r.default,{style:[m.container,{minHeight:(0,l.default)().height}],children:[(0,g.jsx)(n.default,{style:m.title,children:"ChessMate"}),(0,g.jsx)(d.default,{source:a(7877),style:m.profileImage}),(0,g.jsx)(i.default,{style:m.input,placeholder:"EMAIL",placeholderTextColor:"#bbb",value:o,onChangeText:b,keyboardType:"email-address"}),p&&(0,g.jsx)(n.default,{style:m.warning,children:"Invalid email address."}),(0,g.jsx)(c.default,{style:m.button,onPress:async()=>{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o))return x(!0),void y("0");x(!1),j(!0);try{const e=await fetch("https://"+k+"/forgot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})});if(e.ok)S.push({pathname:"reset",params:{email:o}});else{const t=await e.json();y(t.error)}}catch(e){y("2")}finally{j(!1)}},disabled:A,children:(0,g.jsx)(n.default,{style:m.buttonText,children:A?"Sending...":"RESET PASSWORD"})}),"0"!==w&&(0,g.jsx)(n.default,{style:m.warning,children:"1"===w?"We don't have a record of this email on our database.":"Unknown error."}),(0,g.jsx)(f.Link,{href:"login",style:m.linkText,children:(0,g.jsx)(n.default,{style:m.linkText,children:"Back to Login"})})]})})}},9140:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var s=a(3929),l=a(6283),o=a(6773),n=a(5648),r=a(3668),i=a(2772),c=a(558),d=a(484),u=a(8264),f=a(932),h=a(5259),g=a(7851),m=a.n(g),b=a(9637),p=a(6665),x=a(397);const w=r.default.create({container:{flex:1,padding:16,backgroundColor:"#444"},header:{overflow:"hidden",flexDirection:"row",justifyContent:"space-between",marginTop:32,marginBottom:16,borderRadius:4,backgroundColor:"#888"},title:{fontSize:24,fontWeight:"bold",color:"#fff"},profileSection:{flexShrink:1,overflow:"hidden",flexDirection:"row",padding:8,borderRadius:4,backgroundColor:"#000"},profile:{width:20,height:20,borderRadius:20,marginRight:5},menuText:{color:"#fff",fontSize:18},sectionTitle:{fontSize:18,textAlign:"center",fontWeight:"bold",color:"#fff",marginBottom:16},modeRow:{flexDirection:"row",justifyContent:"space-between",marginBottom:8},link:{flex:1},modeButton:{padding:16,backgroundColor:"#888",borderRadius:4,marginHorizontal:4,justifyContent:"center",alignItems:"center"},modeText:{fontSize:18,color:"#fff"},modeLabel:{fontSize:14,color:"#fff"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#0008"},modalContent:{width:"80%",backgroundColor:"#444",borderRadius:10,padding:20},modalTitle:{fontSize:20,fontWeight:"bold",color:"#fff",marginBottom:20,textAlign:"center"},position:{width:"100%",backgroundColor:"#888",borderRadius:8,padding:16,color:"#fff",fontSize:18},warning:{width:"80%",color:"#f00",marginBottom:10,fontSize:18,fontWeight:"bold"},fenLabel:{fontSize:18,fontWeight:"bold",color:"#fff",textAlign:"center",marginTop:15,marginBottom:10},sectionHeader:{fontSize:18,color:"#fff",marginTop:15,marginBottom:10},optionRow:{flexDirection:"row",marginBottom:10},optionButton:{flex:1,padding:10,marginHorizontal:5,borderRadius:5,backgroundColor:"#888",alignItems:"center"},selectedOption:{backgroundColor:"#08f"},optionText:{color:"#fff"},gameItem:{flexDirection:"row",padding:10,marginVertical:5,backgroundColor:"#ccc",borderRadius:5,justifyContent:"space-between"},gameText:{backgroundColor:"#888",fontWeight:"bold",color:"#fff",borderRadius:5,padding:10,margin:5},emptyText:{color:"#ccc",textAlign:"center",marginVertical:20},modalButtons:{flexDirection:"row",marginTop:20},createButton:{flex:1,padding:10,backgroundColor:"#08f",borderRadius:5,marginRight:10,alignItems:"center"},cancelButton:{flex:1,padding:10,backgroundColor:"#888",borderRadius:5,alignItems:"center"},buttonText:{color:"#fff"},difficultyText:{textAlign:"center",color:"#fff",marginTop:8,fontSize:18}}),y=()=>{const[e,t]=(0,p.useState)(!0),[a,r]=(0,p.useState)(""),[g,y]=(0,p.useState)(""),[A,j]=(0,p.useState)({bullet:0,blitz:0,rapid:0,classical:0}),[S,k]=(0,p.useState)(!1),[C,v]=(0,p.useState)(!1),[z,I]=(0,p.useState)(""),[B,T]=(0,p.useState)(""),[P,R]=(0,p.useState)([]),[E,D]=(0,p.useState)("player"),[L,O]=(0,p.useState)("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"),[W,M]=(0,p.useState)(!1),[N,Q]=(0,p.useState)("random"),[_,H]=(0,p.useState)(5),[G,V]=(0,p.useState)("standard"),J=(0,b.useRouter)(),U="chessmate-production.up.railway.app";let K;(0,p.useEffect)((()=>{e&&(async()=>{let e;try{const a=await h.default.getItem("token");e=await fetch("https://"+U+"/verify?token="+a),t(!1)}catch(a){return void t(!1)}e.json().then((e=>{"1"===e.code&&(k(!1),F())}))})()}),[]);const F=async()=>{window.location.href="https://lorinpet.github.io/chessmate_web"},$=async()=>{try{v(!0);const e=await fetch("https://"+U+"/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({position:"standard"===G?"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR":L,type:E,timeControl:z,gameMode:B,difficulty:_})});if(!e.ok)return M(!0),void v(!1);const t=await e.json();k(!1),v(!1),J.push(`game?gameId=${t}&color=${N}&name=${a}&image=${g}&rating=${"bullet"===B?A.bullet:"blitz"===B?A.blitz:"rapid"===B?A.rapid:A.classical}`)}catch(e){console.error("Error creating new game: "+e)}};(0,p.useEffect)((()=>{a||(async()=>{K=await h.default.getItem("token");const e=await fetch("https://"+U+"/data?token="+K),t=await e.json(),a=await t.message.username,s=await t.message.profile_picture_url;r(a);const l=await fetch("https://"+U+"/"+s);y(l.url);const o=await t.message.bullet_rating,n=await t.message.blitz_rating,i=await t.message.rapid_rating,c=await t.message.classical_rating;j({bullet:o,blitz:n,rapid:i,classical:c})})()}),[]),(0,p.useEffect)((()=>{S&&(async()=>{try{const e=await fetch("https://"+U+"/games?mode="+B),t=await e.json();R(t)}catch(e){console.error("Error fetching active games: "+e)}})()}),[S]);const Y=({time:e,label:t})=>(0,x.jsxs)(n.default,{style:w.modeButton,onPress:()=>((e,t)=>{I(e),T(t),k(!0)})(e,t),children:[(0,x.jsx)(l.default,{style:w.modeText,children:e}),(0,x.jsx)(l.default,{style:w.modeLabel,children:t})]});return(0,x.jsx)(i.default,{children:(0,x.jsxs)(s.default,{style:[w.container,{minHeight:(0,c.default)().height}],children:[(0,x.jsxs)(s.default,{style:w.header,children:[(0,x.jsx)(n.default,{onPress:()=>(async()=>{await h.default.clear(),k(!1),F()})(),children:(0,x.jsx)(s.default,{style:w.profileSection,children:(0,x.jsx)(l.default,{style:w.menuText,children:"Logout"})})}),(0,x.jsx)(l.default,{style:w.title,children:"ChessMate"}),(0,x.jsx)(b.Link,{href:"profile",children:(0,x.jsxs)(s.default,{style:w.profileSection,children:[(0,x.jsx)(d.default,{source:{uri:g},style:w.profile}),(0,x.jsx)(l.default,{style:w.menuText,children:a})]})})]}),(0,x.jsxs)(l.default,{style:w.fenLabel,children:["Starting Position ","(","fen notation",")"]}),(0,x.jsxs)(s.default,{style:w.optionRow,children:[(0,x.jsx)(n.default,{style:[w.optionButton,"standard"===G&&w.selectedOption],onPress:()=>V("standard"),children:(0,x.jsx)(l.default,{style:w.optionText,children:"Standard"})}),(0,x.jsx)(n.default,{style:[w.optionButton,"custom"===G&&w.selectedOption],onPress:()=>V("custom"),children:(0,x.jsx)(l.default,{style:w.optionText,children:"Custom"})})]}),"custom"===G&&(0,x.jsx)(s.default,{style:w.optionRow,children:(0,x.jsx)(o.default,{style:w.position,value:L,onChangeText:O})}),(0,x.jsx)(l.default,{style:w.sectionTitle,children:"Select Chess Mode to Play"}),(0,x.jsxs)(s.default,{style:w.modeRow,children:[(0,x.jsx)(s.default,{style:w.link,children:(0,x.jsx)(Y,{time:"1+0",label:"Bullet"})}),(0,x.jsx)(s.default,{style:w.link,children:(0,x.jsx)(Y,{time:"2+1",label:"Bullet"})}),(0,x.jsx)(s.default,{style:w.link,children:(0,x.jsx)(Y,{time:"3+0",label:"Bullet"})})]}),(0,x.jsxs)(s.default,{style:w.modeRow,children:[(0,x.jsx)(s.default,{style:w.link,children:(0,x.jsx)(Y,{time:"3+2",label:"Blitz"})}),(0,x.jsx)(s.default,{style:w.link,children:(0,x.jsx)(Y,{time:"5+0",label:"Blitz"})}),(0,x.jsx)(s.default,{style:w.link,children:(0,x.jsx)(Y,{time:"5+3",label:"Blitz"})})]}),(0,x.jsxs)(s.default,{style:w.modeRow,children:[(0,x.jsx)(s.default,{style:w.link,children:(0,x.jsx)(Y,{time:"10+0",label:"Rapid"})}),(0,x.jsx)(s.default,{style:w.link,children:(0,x.jsx)(Y,{time:"10+5",label:"Rapid"})}),(0,x.jsx)(s.default,{style:w.link,children:(0,x.jsx)(Y,{time:"15+0",label:"Rapid"})})]}),(0,x.jsxs)(s.default,{style:w.modeRow,children:[(0,x.jsx)(s.default,{style:w.link,children:(0,x.jsx)(Y,{time:"15+10",label:"Classical"})}),(0,x.jsx)(s.default,{style:w.link,children:(0,x.jsx)(Y,{time:"30+0",label:"Classical"})}),(0,x.jsx)(s.default,{style:w.link,children:(0,x.jsx)(Y,{time:"30+20",label:"Classical"})})]}),(0,x.jsx)((()=>{return(0,x.jsx)(u.default,{animationType:"fade",transparent:!0,visible:S,onRequestClose:()=>k(!1),children:(0,x.jsx)(i.default,{children:(0,x.jsx)(s.default,{style:[w.modalContainer,{minHeight:(0,c.default)().height}],children:(0,x.jsxs)(s.default,{style:w.modalContent,children:[(0,x.jsx)(l.default,{style:w.modalTitle,children:"Game Options"}),(0,x.jsx)(l.default,{style:w.sectionHeader,children:"Game Type"}),(0,x.jsxs)(s.default,{style:w.optionRow,children:[(0,x.jsx)(n.default,{style:[w.optionButton,"player"===E&&w.selectedOption],onPress:()=>D("player"),children:(0,x.jsx)(l.default,{style:w.optionText,children:"Play vs Player"})}),(0,x.jsx)(n.default,{style:[w.optionButton,"ai"===E&&w.selectedOption],onPress:()=>D("ai"),children:(0,x.jsx)(l.default,{style:w.optionText,children:"Play vs AI"})})]}),(0,x.jsx)(l.default,{style:w.sectionHeader,children:"Your Color"}),(0,x.jsxs)(s.default,{style:w.optionRow,children:[(0,x.jsx)(n.default,{style:[w.optionButton,"white"===N&&w.selectedOption],onPress:()=>Q("white"),children:(0,x.jsx)(l.default,{style:w.optionText,children:"White"})}),(0,x.jsx)(n.default,{style:[w.optionButton,"black"===N&&w.selectedOption],onPress:()=>Q("black"),children:(0,x.jsx)(l.default,{style:w.optionText,children:"Black"})}),(0,x.jsx)(n.default,{style:[w.optionButton,"random"===N&&w.selectedOption],onPress:()=>Q("random"),children:(0,x.jsx)(l.default,{style:w.optionText,children:"Random"})})]}),(0,x.jsx)(l.default,{style:w.sectionHeader,children:"player"===E?"Active Games":"AI Difficulty"}),"player"===E?(0,x.jsx)(f.default,{data:P,keyExtractor:e=>e.id,renderItem:({item:e})=>(0,x.jsx)(i.default,{horizontal:!0,showsHorizontalScrollIndicator:!1,children:(0,x.jsxs)(n.default,{style:w.gameItem,onPress:()=>{return t=e.id,k(!1),void J.push(`game?gameId=${t}&color=${N}&name=${a}&image=${g}&rating=${"bullet"===B?A.bullet:"blitz"===B?A.blitz:"rapid"===B?A.rapid:A.classical}`);var t},children:[(0,x.jsx)(l.default,{style:w.gameText,children:e.opponent}),(0,x.jsx)(l.default,{style:w.gameText,children:e.rating}),(0,x.jsx)(l.default,{style:w.gameText,children:e.position}),(0,x.jsx)(l.default,{style:w.gameText,children:e.time}),(0,x.jsx)(l.default,{style:w.gameText,children:e.color})]})}),ListEmptyComponent:(0,x.jsx)(l.default,{style:w.emptyText,children:"No games to join"})}):(0,x.jsxs)(s.default,{children:[(0,x.jsx)(m(),{minimumValue:0,maximumValue:20,step:1,value:_,onValueChange:H,minimumTrackTintColor:"#08f",maximumTrackTintColor:"#888"}),(0,x.jsxs)(l.default,{style:w.difficultyText,children:["Level: ",_," (",(e=_,e<=3?"Beginner":e<=6?"Intermediate":e<=9?"Advanced":e<=12?"Master":e<=15?"Grandmaster":"Impossible"),")"]})]}),"custom"===G&&W&&(0,x.jsx)(l.default,{style:w.warning,children:"Your fen string is invalid!"}),(0,x.jsxs)(s.default,{style:w.modalButtons,children:[(0,x.jsx)(n.default,{style:w.createButton,onPress:$,children:(0,x.jsx)(l.default,{style:w.buttonText,children:C?"Creating...":"Create a game"})}),(0,x.jsx)(n.default,{style:w.cancelButton,onPress:()=>{k(!1),M(!1)},children:(0,x.jsx)(l.default,{style:w.buttonText,children:"Cancel"})})]})]})})})});var e}),{})]})})}},9442:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/bq.8abb9b5abd07e9d46505.png"},9708:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/wp.869f7c5cb2e7d6a80fce.png"},9736:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/bk.e92e1bc2ca72894a8346.png"}},t={};function a(s){var l=t[s];if(void 0!==l)return l.exports;var o=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,(()=>{var e=[];a.O=(t,s,l,o)=>{if(!s){var n=1/0;for(d=0;d<e.length;d++){for(var[s,l,o]=e[d],r=!0,i=0;i<s.length;i++)(!1&o||n>=o)&&Object.keys(a.O).every((e=>a.O[e](s[i])))?s.splice(i--,1):(r=!1,o<n&&(n=o));if(r){e.splice(d--,1);var c=l();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,l,o]}})(),a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.p="/chessmate_web/",(()=>{var e={792:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var l,o,[n,r,i]=s,c=0;if(n.some((t=>0!==e[t]))){for(l in r)a.o(r,l)&&(a.m[l]=r[l]);if(i)var d=i(a)}for(t&&t(s);c<n.length;c++)o=n[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},s=self.webpackChunkweb=self.webpackChunkweb||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,[321],(()=>a(1697)));s=a.O(s)})();
//# sourceMappingURL=main.2bc1616b.js.map